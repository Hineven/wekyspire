# çŠ¶æ€å±•ç¤ºæ¨¡å—ç»„ä»¶

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue)
- [HealthBar.vue](file://src/components/global/HealthBar.vue)
- [ManaBar.vue](file://src/components/global/ManaBar.vue)
- [EffectDisplayBar.vue](file://src/components/global/EffectDisplayBar.vue)
- [PlayerBasicStats.vue](file://src/components/global/PlayerBasicStats.vue)
- [gameState.js](file://src/data/gameState.js)
- [player.js](file://src/data/player.js)
- [unit.js](file://src/data/unit.js)
- [frontendEventBus.js](file://src/frontendEventBus.js)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–åˆ†æ](#ä¾èµ–åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)

## ç®€ä»‹
æœ¬æ–‡æ¡£è¯¦ç»†é˜è¿°äº†æ¸¸æˆç³»ç»Ÿä¸­çŠ¶æ€å±•ç¤ºæ¨¡å—çš„æ¶æ„è®¾è®¡ä¸å®ç°æœºåˆ¶ã€‚é‡ç‚¹åˆ†æäº†ç©å®¶ä¸æ•ŒäººçŠ¶æ€é¢æ¿å¦‚ä½•ä»å…¨å±€æ¸¸æˆçŠ¶æ€ä¸­å“åº”å¼åœ°è®¢é˜…å¹¶æ›´æ–°å•ä½çŠ¶æ€ï¼ˆå¦‚ç”Ÿå‘½å€¼ã€æ³•åŠ›å€¼ã€å¢ç›Š/å‡ç›Šæ•ˆæœï¼‰ï¼Œå¹¶æ·±å…¥è§£æäº†è¿›åº¦æ¡æ¸²æŸ“ã€æ•ˆæœå›¾æ ‡åºåˆ—ç”Ÿæˆã€åŸºç¡€å±æ€§å±•ç¤ºç­‰æ ¸å¿ƒåŠŸèƒ½çš„å®ç°é€»è¾‘ã€‚åŒæ—¶ï¼Œæ–‡æ¡£è¿˜æ¢è®¨äº†ç»„ä»¶å¤ç”¨æ¨¡å¼ã€è‡ªå®šä¹‰æ‰©å±•æ–¹æ³•ä»¥åŠå¸¸è§é—®é¢˜çš„è°ƒè¯•æ–¹æ¡ˆã€‚

## é¡¹ç›®ç»“æ„
çŠ¶æ€å±•ç¤ºæ¨¡å—ä¸»è¦ç”±ä½äº`src/components/global/`å’Œ`src/components/battle/`ç›®å½•ä¸‹çš„å¤šä¸ªVueç»„ä»¶æ„æˆã€‚è¿™äº›ç»„ä»¶é€šè¿‡ç»„åˆä¸å¤ç”¨ï¼Œæ„å»ºå‡ºç©å®¶å’Œæ•Œäººçš„çŠ¶æ€ä¿¡æ¯ç•Œé¢ã€‚æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬çŠ¶æ€é¢æ¿ã€ç”Ÿå‘½æ¡ã€æ³•åŠ›æ¡ã€æ•ˆæœæ˜¾ç¤ºæ å’ŒåŸºç¡€å±æ€§å±•ç¤ºç­‰ã€‚

```mermaid
graph TB
subgraph "å…¨å±€ç»„ä»¶"
HealthBar[HealthBar.vue]
ManaBar[ManaBar.vue]
EffectDisplayBar[EffectDisplayBar.vue]
PlayerBasicStats[PlayerBasicStats.vue]
BarPoint[BarPoint.vue]
end
subgraph "çŠ¶æ€é¢æ¿"
PlayerStatusPanel[PlayerStatusPanel.vue]
EnemyStatusPanel[EnemyStatusPanel.vue]
end
PlayerStatusPanel --> HealthBar
PlayerStatusPanel --> ManaBar
PlayerStatusPanel --> EffectDisplayBar
PlayerStatusPanel --> PlayerBasicStats
PlayerStatusPanel --> ActionPointsBar[ActionPointsBar.vue]
EnemyStatusPanel --> HealthBar
EnemyStatusPanel --> EffectDisplayBar
ManaBar --> BarPoint
```

**å›¾ç¤ºæ¥æº**  
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue)
- [HealthBar.vue](file://src/components/global/HealthBar.vue)
- [ManaBar.vue](file://src/components/global/ManaBar.vue)
- [EffectDisplayBar.vue](file://src/components/global/EffectDisplayBar.vue)

**æœ¬èŠ‚æ¥æº**  
- [src/components](file://src/components#L1-L50)

## æ ¸å¿ƒç»„ä»¶
çŠ¶æ€å±•ç¤ºæ¨¡å—çš„æ ¸å¿ƒç”±`PlayerStatusPanel.vue`å’Œ`EnemyStatusPanel.vue`ä¸¤ä¸ªé¢æ¿ç»„ä»¶æ„æˆã€‚å®ƒä»¬åˆ†åˆ«è´Ÿè´£æ¸²æŸ“ç©å®¶å’Œæ•Œäººçš„å®Œæ•´çŠ¶æ€ä¿¡æ¯ã€‚è¿™ä¸¤ä¸ªç»„ä»¶é€šè¿‡`props`æ¥æ”¶å•ä½å¯¹è±¡ï¼ˆ`player`æˆ–`enemy`ï¼‰ï¼Œå¹¶åˆ©ç”¨Vueçš„å“åº”å¼ç³»ç»Ÿï¼Œè‡ªåŠ¨ç›‘å¬å•ä½å¯¹è±¡å†…éƒ¨å±æ€§ï¼ˆå¦‚`hp`ã€`mana`ã€`effects`ç­‰ï¼‰çš„å˜åŒ–ï¼Œä»è€Œå®ç°UIçš„å®æ—¶æ›´æ–°ã€‚

**æœ¬èŠ‚æ¥æº**  
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue#L1-L50)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue#L1-L50)

## æ¶æ„æ¦‚è§ˆ
æ•´ä¸ªçŠ¶æ€å±•ç¤ºæ¨¡å—é‡‡ç”¨åˆ†å±‚ç»„åˆçš„æ¶æ„è®¾è®¡ã€‚é¡¶å±‚æ˜¯çŠ¶æ€é¢æ¿ç»„ä»¶ï¼Œå®ƒä»¬è´Ÿè´£å¸ƒå±€å’Œåè°ƒã€‚ä¸­é—´å±‚æ˜¯ä¸“ç”¨çš„çŠ¶æ€æ¡ç»„ä»¶ï¼ˆå¦‚`HealthBar`ã€`ManaBar`ï¼‰ï¼Œè´Ÿè´£ç‰¹å®šçŠ¶æ€çš„å¯è§†åŒ–ã€‚åº•å±‚æ˜¯åŸå­åŒ–ç»„ä»¶ï¼ˆå¦‚`BarPoint`ã€`EffectIcon`ï¼‰ï¼Œæä¾›åŸºç¡€UIå…ƒç´ ã€‚æ•°æ®æµä»`gameState`ä¸­çš„`player`å’Œ`enemy`å¯¹è±¡å‡ºå‘ï¼Œé€šè¿‡`props`é€å±‚å‘ä¸‹ä¼ é€’ï¼Œåˆ©ç”¨Vueçš„å“åº”å¼ä¾èµ–è¿½è¸ªå®ç°è‡ªåŠ¨æ›´æ–°ã€‚

```mermaid
graph TD
A[gameState.player] --> B[PlayerStatusPanel]
A --> C[EnemyStatusPanel]
B --> D[HealthBar]
B --> E[ManaBar]
B --> F[EffectDisplayBar]
B --> G[PlayerBasicStats]
C --> D
C --> F
D --> H[BarPoint]
E --> H
F --> I[EffectIcon]
```

**å›¾ç¤ºæ¥æº**  
- [gameState.js](file://src/data/gameState.js#L1-L20)
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue#L1-L50)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue#L1-L50)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### ç©å®¶ä¸æ•ŒäººçŠ¶æ€é¢æ¿åˆ†æ
`PlayerStatusPanel.vue`å’Œ`EnemyStatusPanel.vue`æ˜¯çŠ¶æ€ä¿¡æ¯çš„å®¹å™¨ç»„ä»¶ã€‚å®ƒä»¬é€šè¿‡`props`æ¥æ”¶`player`æˆ–`enemy`å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡æ˜¯`reactive`åˆ›å»ºçš„å“åº”å¼å¯¹è±¡ï¼Œæºè‡ª`gameState.js`ä¸­çš„`displayGameState.player`ã€‚å½“æ¸¸æˆé€»è¾‘ä¿®æ”¹äº†`player.hp`æˆ–`player.effects`ç­‰å±æ€§æ—¶ï¼ŒVueçš„å“åº”å¼ç³»ç»Ÿä¼šè‡ªåŠ¨è§¦å‘ç›¸å…³ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚

`PlayerStatusPanel`åœ¨ä¼‘æ•´ç•Œé¢ï¼ˆ`restScreen`æ¨¡å¼ï¼‰ä¸‹ä¼šæ˜¾ç¤ºä¸åŒçš„UIï¼Œä¾‹å¦‚æ˜¾ç¤º`PlayerBasicStats`ä¸­çš„é‡‘é’±ã€çµèƒ½ç­‰ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ç©å®¶ç­‰é˜¶åŠ¨æ€æ”¹å˜é¢æ¿æ ·å¼ã€‚å®ƒè¿˜é€šè¿‡`watch`ä¾¦å¬å™¨ç›‘å¬`player.tier`çš„å˜åŒ–ï¼Œä¸€æ—¦ç©å®¶å‡çº§ï¼Œä¾¿ä¼šæ’­æ”¾ä¸€ä¸ªé‡‘è‰²ç²’å­ç‰¹æ•ˆåŠ¨ç”»ã€‚

`EnemyStatusPanel`åˆ™åŒ…å«ä¸€ä¸ªä¿¡æ¯æ‚¬æµ®æ¡†åŠŸèƒ½ï¼Œå½“é¼ æ ‡æ‚¬åœåœ¨â€œï¼Ÿâ€æŒ‰é’®ä¸Šæ—¶ï¼Œä¼šæ˜¾ç¤ºæ•Œäººçš„è¯¦ç»†æè¿°å’Œå±æ€§ã€‚

#### å¯¹äºAPI/æœåŠ¡ç»„ä»¶ï¼š
```mermaid
sequenceDiagram
participant GameLogic as æ¸¸æˆé€»è¾‘
participant GameState as gameState
participant PlayerPanel as PlayerStatusPanel
participant HealthBar as HealthBar
GameLogic->>GameState : ä¿®æ”¹ player.hp -= 10
GameState-->>PlayerPanel : å“åº”å¼æ›´æ–°è§¦å‘
PlayerPanel->>HealthBar : é€šè¿‡propsä¼ é€’æ–°çš„playerå¯¹è±¡
HealthBar->>HealthBar : è®¡ç®— (hp/maxHp) * 100% æ›´æ–°fillå®½åº¦
HealthBar-->>UI : æ¸²æŸ“æ›´æ–°åçš„ç”Ÿå‘½æ¡
```

**å›¾ç¤ºæ¥æº**  
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue#L1-L100)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue#L1-L100)
- [gameState.js](file://src/data/gameState.js#L1-L20)

**æœ¬èŠ‚æ¥æº**  
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue#L1-L215)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue#L1-L325)

### ç”Ÿå‘½æ¡ä¸æ³•åŠ›æ¡åˆ†æ
`HealthBar.vue`å’Œ`ManaBar.vue`ç»„ä»¶è´Ÿè´£æ¸²æŸ“ç”Ÿå‘½å€¼å’Œæ³•åŠ›å€¼çš„è¿›åº¦æ¡ã€‚

`HealthBar`çš„æ¸²æŸ“é€»è¾‘éå¸¸ç›´æ¥ã€‚å®ƒæ¥æ”¶ä¸€ä¸ª`unit`å¯¹è±¡ï¼Œé€šè¿‡è®¡ç®—`unit.hp / unit.maxHp * 100%`æ¥è®¾ç½®å†…éƒ¨`fill`å…ƒç´ çš„`width`ã€‚å…¶é˜ˆå€¼è­¦å‘Šæœºåˆ¶ä½“ç°åœ¨æ ·å¼ä¸Šï¼šç”Ÿå‘½æ¡çš„èƒŒæ™¯è‰²ä¸ºç°è‰²(`#f0f0f0`)ï¼Œå¡«å……è‰²ä¸ºç»¿è‰²(`#4caf50`)ï¼Œè€Œæ•Œäººçš„ç”Ÿå‘½æ¡å¡«å……è‰²ä¸ºçº¢è‰²(`#f44336`)ï¼Œé€šè¿‡ä¸åŒçš„é¢œè‰²ç›´è§‚åœ°ä¼ è¾¾å±é™©ç¨‹åº¦ã€‚

`ManaBar`é‡‡ç”¨äº†ä¸åŒçš„è§†è§‰è®¾è®¡ï¼Œä½¿ç”¨ä¸€ç³»åˆ—åœ†ç‚¹(`BarPoint`)æ¥è¡¨ç¤ºæ³•åŠ›å€¼ã€‚å®ƒé€šè¿‡`v-for`å¾ªç¯`player.maxMana`æ¬¡æ¥åˆ›å»ºåœ†ç‚¹ï¼Œå¹¶æ ¹æ®`player.mana`çš„å€¼å†³å®šæ¯ä¸ªåœ†ç‚¹æ˜¯å¦å¡«å……ã€‚æ­¤å¤–ï¼Œ`ManaBar`è¿˜å®ç°äº†é˜ˆå€¼è­¦å‘Šçš„å¢å¼ºç‰ˆâ€”â€”é«˜äº®æœºåˆ¶ã€‚å®ƒé€šè¿‡`frontendEventBus`ç›‘å¬æŠ€èƒ½å¡ç‰Œçš„æ‚¬åœäº‹ä»¶ã€‚å½“ç©å®¶å°†é¼ æ ‡æ‚¬åœåœ¨ä¸€ä¸ªæŠ€èƒ½å¡ä¸Šæ—¶ï¼Œè¯¥ç»„ä»¶ä¼šè®¡ç®—è¯¥æŠ€èƒ½çš„æ³•åŠ›æ¶ˆè€—ï¼Œå¹¶å°†å½“å‰æ³•åŠ›å€¼ä¸­å¯¹åº”æ¶ˆè€—æ•°é‡çš„åœ†ç‚¹é«˜äº®æ˜¾ç¤ºï¼ˆé€šè¿‡`highlightedManaCost`å’Œ`manaDots`è®¡ç®—å±æ€§å®ç°ï¼‰ï¼Œä¸ºç©å®¶æä¾›ç›´è§‚çš„ä½¿ç”¨æˆæœ¬é¢„è§ˆã€‚

#### å¯¹äºå¤æ‚é€»è¾‘ç»„ä»¶ï¼š
```mermaid
flowchart TD
Start([ManaBar Mounted]) --> Listen["ç›‘å¬ skill-card-hover-start äº‹ä»¶"]
Listen --> HoverStart["æ”¶åˆ°äº‹ä»¶ï¼Œè·å–æŠ€èƒ½æ³•åŠ›æ¶ˆè€—"]
HoverStart --> Update["æ›´æ–° highlightedManaCost"]
Update --> Recompute["é‡æ–°è®¡ç®— manaDots æ•°ç»„"]
Recompute --> Render["æ¸²æŸ“é«˜äº®çš„åœ†ç‚¹"]
Listen --> HoverEnd["æ”¶åˆ° skill-card-hover-end äº‹ä»¶"]
HoverEnd --> Reset["é‡ç½® highlightedManaCost = 0"]
Reset --> Recompute
```

**å›¾ç¤ºæ¥æº**  
- [ManaBar.vue](file://src/components/global/ManaBar.vue#L1-L120)
- [frontendEventBus.js](file://src/frontendEventBus.js#L1-L10)

**æœ¬èŠ‚æ¥æº**  
- [HealthBar.vue](file://src/components/global/HealthBar.vue#L1-L101)
- [ManaBar.vue](file://src/components/global/ManaBar.vue#L1-L120)

### æ•ˆæœæ˜¾ç¤ºæ åˆ†æ
`EffectDisplayBar.vue`ç»„ä»¶è´Ÿè´£è§£æå•ä½çš„`effectList`ï¼ˆå³`unit.effects`å¯¹è±¡ï¼‰å¹¶ç”Ÿæˆå¯è§†åŒ–å›¾æ ‡åºåˆ—ã€‚

å…¶å®ç°æœºåˆ¶æ˜¯ï¼šæ¥æ”¶ä¸€ä¸ª`effects`å¯¹è±¡ä½œä¸º`prop`ï¼Œè¯¥å¯¹è±¡çš„é”®æ˜¯æ•ˆæœåç§°ï¼ˆå¦‚"åŠ›é‡"ã€"æ˜“ä¼¤"ï¼‰ï¼Œå€¼æ˜¯è¯¥æ•ˆæœçš„å±‚æ•°ã€‚ç»„ä»¶ä½¿ç”¨`v-for`éå†è¿™ä¸ªå¯¹è±¡ï¼Œä¸ºæ¯ä¸€ä¸ªå±‚æ•°å¤§äº0çš„æ•ˆæœåˆ›å»ºä¸€ä¸ª`EffectIcon`ç»„ä»¶å®ä¾‹ã€‚`EffectIcon`ä¼šæ ¹æ®`effect-name`æ˜¾ç¤ºå¯¹åº”çš„å›¾æ ‡å’Œå±‚æ•°ã€‚

ä¸ºäº†å®ç°æ•ˆæœå˜åŒ–æ—¶çš„åŠ¨ç”»åé¦ˆï¼ˆå¦‚æ•ˆæœæ¶ˆå¤±æ—¶çš„ç²’å­ç‰¹æ•ˆï¼‰ï¼Œ`EffectDisplayBar`ä½¿ç”¨äº†ä¸€ä¸ª`deep`ä¾¦å¬å™¨æ¥ç›‘æ§`effects`å¯¹è±¡çš„æ·±å±‚å˜åŒ–ã€‚å®ƒç»´æŠ¤äº†ä¸€ä¸ª`previousEffects`å‰¯æœ¬ã€‚æ¯æ¬¡`effects`å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šæ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªå¯¹è±¡ï¼Œæ‰¾å‡ºå“ªäº›æ•ˆæœçš„å±‚æ•°ä»å¤§äº0å˜æˆäº†0ï¼ˆå³æ•ˆæœæ¶ˆå¤±ï¼‰ã€‚ä¸€æ—¦æ£€æµ‹åˆ°æ•ˆæœæ¶ˆå¤±ï¼Œå®ƒå°±ä¼šè°ƒç”¨`playEffectExpiredAnimation`æ–¹æ³•ï¼Œé€šè¿‡`frontendEventBus`äº‹ä»¶æ€»çº¿å‘å°„ä¸€ä¸ª`spawn-particles`äº‹ä»¶ï¼Œè§¦å‘å…¨å±€ç²’å­ç³»ç»Ÿçš„å“åº”ï¼Œä»è€Œåœ¨UIä¸Šæ’­æ”¾ä¸€ä¸ªç²’å­åŠ¨ç”»ã€‚

**æœ¬èŠ‚æ¥æº**  
- [EffectDisplayBar.vue](file://src/components/global/EffectDisplayBar.vue#L1-L154)
- [frontendEventBus.js](file://src/frontendEventBus.js#L1-L10)

### è§’è‰²åŸºç¡€å±æ€§å±•ç¤ºåˆ†æ
`PlayerBasicStats.vue`ç»„ä»¶å±•ç¤ºäº†ç©å®¶çš„é‡‘é’±ã€çµèƒ½ã€é˜²å¾¡å’Œç­‰é˜¶ç­‰åŸºç¡€å±æ€§ã€‚

è¯¥ç»„ä»¶çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æä¾›åŠ¨æ€çš„æ•°å€¼å˜åŒ–åé¦ˆã€‚å®ƒé€šè¿‡ä¸€ä¸ª`deep`ä¾¦å¬å™¨ç›‘æ§`player`å¯¹è±¡ã€‚å½“ä¾¦å¬åˆ°`money`ã€`defense`ã€`magic`æˆ–`tier`ç­‰å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä¸¤ä¸ªæ“ä½œï¼š
1.  **è§¦å‘ç¼©æ”¾åŠ¨ç”»**ï¼šè°ƒç”¨`triggerStatBump`æ–¹æ³•ï¼Œä¸ºå‘ç”Ÿå˜åŒ–çš„å±æ€§å€¼æ·»åŠ ä¸€ä¸ª`stat-bump` CSSç±»ï¼Œå®ç°ä¸€ä¸ªâ€œè·³åŠ¨â€çš„è§†è§‰åé¦ˆã€‚
2.  **ç”Ÿæˆæµ®åŠ¨æ–‡å­—**ï¼šè°ƒç”¨`spawnTextParticle`æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«å˜åŒ–é‡ï¼ˆå¦‚`+5ğŸ’°`ï¼‰çš„ç²’å­ï¼Œå¹¶é€šè¿‡`frontendEventBus.emit('spawn-particles')`äº‹ä»¶å°†å…¶å‘é€åˆ°å…¨å±€ç²’å­ç³»ç»Ÿï¼Œä½¿æ–‡å­—ä»å±æ€§å€¼ä¸Šæ–¹é£˜èµ·ï¼Œæ¸…æ™°åœ°å‘ŠçŸ¥ç©å®¶å˜åŒ–çš„å…·ä½“æ•°å€¼ã€‚

è¿™ç§è®¾è®¡å°†çŠ¶æ€æ›´æ–°çš„è§†è§‰åé¦ˆä»ç®€å•çš„é™æ€æ˜¾ç¤ºæå‡åˆ°äº†åŠ¨æ€äº¤äº’çš„å±‚é¢ï¼Œæå¤§åœ°å¢å¼ºäº†ç”¨æˆ·ä½“éªŒã€‚

**æœ¬èŠ‚æ¥æº**  
- [PlayerBasicStats.vue](file://src/components/global/PlayerBasicStats.vue#L1-L183)

## ä¾èµ–åˆ†æ
çŠ¶æ€å±•ç¤ºæ¨¡å—çš„ç»„ä»¶ä¹‹é—´å­˜åœ¨æ¸…æ™°çš„ä¾èµ–å…³ç³»ã€‚`PlayerStatusPanel`å’Œ`EnemyStatusPanel`ä¾èµ–äº`HealthBar`ã€`ManaBar`ã€`EffectDisplayBar`å’Œ`PlayerBasicStats`ã€‚`ManaBar`è¿›ä¸€æ­¥ä¾èµ–äº`BarPoint`ã€‚è¿™äº›ä¾èµ–é€šè¿‡Vueçš„`components`é€‰é¡¹å’Œ`import`è¯­å¥åœ¨ä»£ç ä¸­æ˜¾å¼å£°æ˜ã€‚

æ›´å…³é”®çš„æ˜¯ï¼Œè¿™äº›ç»„ä»¶éƒ½ä¾èµ–äºå…¨å±€çš„`gameState`æ•°æ®æºã€‚å®ƒä»¬é€šè¿‡`props`æ¥æ”¶æ¥è‡ª`gameState.displayGameState`çš„`player`å’Œ`enemy`å¯¹è±¡ã€‚åŒæ—¶ï¼Œå®ƒä»¬è¿˜ä¾èµ–äº`frontendEventBus`è¿›è¡Œè·¨ç»„ä»¶é€šä¿¡ï¼Œä¾‹å¦‚`ManaBar`ç›‘å¬æŠ€èƒ½æ‚¬åœäº‹ä»¶ï¼Œ`PlayerBasicStats`å’Œ`EffectDisplayBar`å‘å°„ç²’å­ç”Ÿæˆäº‹ä»¶ã€‚

```mermaid
graph TD
A[gameState.js] --> B[PlayerStatusPanel]
A --> C[EnemyStatusPanel]
D[frontendEventBus.js] --> E[ManaBar]
D --> F[PlayerBasicStats]
D --> G[EffectDisplayBar]
B --> H[HealthBar]
B --> I[ManaBar]
B --> J[EffectDisplayBar]
B --> K[PlayerBasicStats]
C --> H
C --> J
I --> L[BarPoint]
```

**å›¾ç¤ºæ¥æº**  
- [gameState.js](file://src/data/gameState.js#L1-L20)
- [frontendEventBus.js](file://src/frontendEventBus.js#L1-L10)
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue#L1-L50)
- [EnemyStatusPanel.vue](file://src/components/battle/EnemyStatusPanel.vue#L1-L50)

**æœ¬èŠ‚æ¥æº**  
- [gameState.js](file://src/data/gameState.js#L1-L75)
- [frontendEventBus.js](file://src/frontendEventBus.js#L1-L20)

## æ€§èƒ½è€ƒè™‘
è¯¥æ¨¡å—çš„æ€§èƒ½è¡¨ç°è‰¯å¥½ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå……åˆ†åˆ©ç”¨äº†Vueçš„å“åº”å¼ç³»ç»Ÿï¼Œé¿å…äº†æ‰‹åŠ¨çš„DOMæ“ä½œå’Œå¤æ‚çš„æ›´æ–°é€»è¾‘ã€‚æ•°æ®é©±åŠ¨çš„è§†å›¾æ›´æ–°æœºåˆ¶ç¡®ä¿äº†åªæœ‰åœ¨ç›¸å…³æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚

éœ€è¦æ³¨æ„çš„æ½œåœ¨æ€§èƒ½ç‚¹æ˜¯`EffectDisplayBar`ä¸­çš„`deep`ä¾¦å¬å™¨ã€‚ç”±äº`effects`å¯¹è±¡å¯èƒ½åŒ…å«å¤šä¸ªé”®å€¼å¯¹ï¼Œæ·±åº¦ç›‘å¬å¯èƒ½ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚ä½†åœ¨å½“å‰çš„æ¸¸æˆåœºæ™¯ä¸‹ï¼Œå•ä½åŒæ—¶æ‹¥æœ‰çš„æ•ˆæœæ•°é‡æœ‰é™ï¼Œæ­¤å¼€é”€åœ¨å¯æ¥å—èŒƒå›´å†…ã€‚æ­¤å¤–ï¼Œ`JSON.parse(JSON.stringify())`ç”¨äºåˆ›å»º`previousEffects`çš„æ·±æ‹·è´ï¼Œåœ¨æ•ˆæœåˆ—è¡¨éå¸¸åºå¤§æ—¶å¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œä½†æ ¹æ®æ¸¸æˆè®¾è®¡ï¼Œè¿™ç§æƒ…å†µæå°‘è§ã€‚

## æ•…éšœæ’é™¤æŒ‡å—
åœ¨å¼€å‘å’Œè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹å¸¸è§é—®é¢˜ï¼š

*   **çŠ¶æ€ä¸åŒæ­¥**ï¼šå¦‚æœUIæ²¡æœ‰éš`gameState`çš„å˜åŒ–è€Œæ›´æ–°ï¼Œé¦–å…ˆæ£€æŸ¥`player`æˆ–`enemy`å¯¹è±¡æ˜¯å¦æ˜¯é€šè¿‡`reactive`åˆ›å»ºçš„å“åº”å¼å¯¹è±¡ã€‚å…¶æ¬¡ï¼Œç¡®è®¤`props`çš„ä¼ é€’é“¾æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ•°æ®ä»`gameState`æµå‘äº†æœ€ç»ˆçš„å±•ç¤ºç»„ä»¶ã€‚æœ€åï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç›´æ¥ä¿®æ”¹å¯¹è±¡å¼•ç”¨ï¼ˆå¦‚`player = newPlayer`ï¼‰è€Œéä¿®æ”¹å…¶å†…éƒ¨å±æ€§çš„è¡Œä¸ºï¼Œè¿™ä¼šç ´åå“åº”å¼è¿æ¥ã€‚
*   **UIé—ªçƒ**ï¼šå¦‚æœåœ¨çŠ¶æ€æ›´æ–°æ—¶å‡ºç°UIé—ªçƒï¼Œå¯èƒ½æ˜¯ç”±äºåœ¨çŸ­æ—¶é—´å†…è§¦å‘äº†å¤šæ¬¡ä¸å¿…è¦æˆ–å†²çªçš„çŠ¶æ€æ›´æ–°ã€‚åº”æ£€æŸ¥æ¸¸æˆé€»è¾‘ä¸­æ˜¯å¦æœ‰å¾ªç¯æˆ–é‡å¤çš„æ›´æ–°æ“ä½œã€‚å¯¹äº`EffectDisplayBar`ï¼Œç¡®ä¿`playEffectExpiredAnimation`ä¸ä¼šå› é¢‘ç¹çš„å¾®å°å˜åŒ–è€Œè¢«è¿‡åº¦è§¦å‘ã€‚
*   **äº‹ä»¶æœªå“åº”**ï¼šå¦‚æœ`ManaBar`çš„é«˜äº®åŠŸèƒ½æˆ–`PlayerBasicStats`çš„ç²’å­æ•ˆæœå¤±æ•ˆï¼Œåº”æ£€æŸ¥`frontendEventBus`ä¸Šçš„äº‹ä»¶ç›‘å¬å’Œå‘å°„æ˜¯å¦æ­£ç¡®ã€‚ç¡®ä¿`on`å’Œ`emit`çš„äº‹ä»¶åç§°å®Œå…¨åŒ¹é…ï¼Œå¹¶ä¸”åœ¨ç»„ä»¶é”€æ¯æ—¶ï¼ˆ`beforeUnmount`ï¼‰æ­£ç¡®åœ°ç§»é™¤äº†äº‹ä»¶ç›‘å¬å™¨ï¼Œä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚

**æœ¬èŠ‚æ¥æº**  
- [PlayerStatusPanel.vue](file://src/components/global/PlayerStatusPanel.vue#L1-L215)
- [ManaBar.vue](file://src/components/global/ManaBar.vue#L1-L120)
- [PlayerBasicStats.vue](file://src/components/global/PlayerBasicStats.vue#L1-L183)
- [frontendEventBus.js](file://src/frontendEventBus.js#L1-L20)

## ç»“è®º
çŠ¶æ€å±•ç¤ºæ¨¡å—é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ç»„ä»¶åŒ–æ¶æ„ï¼Œå®ç°äº†é«˜æ•ˆã€å“åº”å¼ä¸”è§†è§‰ä¸°å¯Œçš„å•ä½çŠ¶æ€å‘ˆç°ã€‚å®ƒä»¥`gameState`ä¸ºæ ¸å¿ƒæ•°æ®æºï¼Œåˆ©ç”¨Vueçš„å“åº”å¼ç³»ç»Ÿå’Œäº‹ä»¶æ€»çº¿ï¼Œæ„å»ºäº†ä¸€ä¸ªæ•°æ®é©±åŠ¨ã€äº¤äº’æ€§å¼ºçš„UIä½“ç³»ã€‚å„ç»„ä»¶èŒè´£åˆ†æ˜ï¼Œå¤ç”¨æ€§é«˜ï¼Œä¸ºæ¸¸æˆæä¾›äº†ç¨³å®šå¯é çš„çŠ¶æ€å¯è§†åŒ–æ”¯æŒã€‚é€šè¿‡ç†è§£å…¶è®¾è®¡åŸç†å’Œæ½œåœ¨é—®é¢˜ï¼Œå¼€å‘è€…å¯ä»¥æœ‰æ•ˆåœ°ç»´æŠ¤å’Œæ‰©å±•æ­¤æ¨¡å—ã€‚